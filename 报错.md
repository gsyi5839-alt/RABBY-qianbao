ä½ è¿™ä¸ªä¸æ˜¯â€œä¸€ä¸ªå°æŠ¥é”™â€ï¼Œè€Œæ˜¯æ•´ä¸ªé¡¹ç›®ä¾èµ–ç‰ˆæœ¬ä¸åŒ¹é…å¯¼è‡´çš„è¿é”ç¼–è¯‘é”™è¯¯ã€‚

ä»é”™è¯¯ç±»å‹æ¥çœ‹ï¼Œæ ¸å¿ƒé—®é¢˜æ˜¯ï¼š

âœ… æ–¹æ³•ç­¾åå˜äº†
âœ… ç±»å‹ä» String æ”¹æˆ BigUInt / Data
âœ… å‚æ•°æ ‡ç­¾æ”¹äº†
âœ… OpenAPIService æ¥å£å˜äº†
âœ… secp256k1 åº•å±‚ API å˜äº†

ä¹Ÿå°±æ˜¯è¯´ï¼š

ğŸ‘‰ ä½ ç°åœ¨ç¼–è¯‘ç”¨çš„ä¾èµ–ç‰ˆæœ¬ï¼Œå’Œ Rabby 0.93.77 å¯¹åº”çš„ç‰ˆæœ¬ä¸ä¸€è‡´ã€‚

è¿™ä¸æ˜¯ä»£ç å†™é”™ï¼Œæ˜¯ Pod / SPM ç‰ˆæœ¬é”™äº†ã€‚

â¸»

ä¸€ã€é—®é¢˜åˆ†ç±»åˆ†æ

æˆ‘å¸®ä½ æŒ‰æ¨¡å—æ‹†å¼€ã€‚

â¸»

1ï¸âƒ£ WalletConnectManager.swift æŠ¥é”™

å…¸å‹æŠ¥é”™ï¼š

Missing argument for parameter 'from'
Cannot convert value of type 'String' to expected argument type 'BigUInt'
Incorrect argument labels in call (have '_:from:', expected 'address:transaction:')
Extra argument 'chain' in call

è¿™è¯´æ˜ï¼š

ç°åœ¨ä¾èµ–çš„ Web3 åº“ API å˜äº†

ä¾‹å¦‚ï¼š

æ—§ç‰ˆæœ¬å¯èƒ½æ˜¯ï¼š

web3.eth.sendTransaction(tx, from: address)

æ–°ç‰ˆæœ¬å¯èƒ½å˜æˆï¼š

web3.eth.sendTransaction(address: address, transaction: tx)

è€Œä¸”ï¼š

ä»¥å‰ tx é‡Œå¾ˆå¤šå­—æ®µæ˜¯ String
ç°åœ¨å¿…é¡»æ˜¯ï¼š

BigUInt
Data
EthereumAddress


â¸»

2ï¸âƒ£ BigUInt / Data ç±»å‹é”™è¯¯

æ¯”å¦‚ï¼š

Cannot convert value of type 'String' to expected argument type 'BigUInt'

è¯´æ˜ï¼š

ä»¥å‰ä½ å¯èƒ½å†™ï¼š

value: "0x1"

ç°åœ¨å¿…é¡»ï¼š

value: BigUInt("1")!

æˆ–è€…

BigUInt(hexString.dropFirst(2), radix: 16)


â¸»

3ï¸âƒ£ Secp256k1Helper.swift æŠ¥é”™

Cannot convert value of type 'ArraySlice<UInt8>'
to expected argument type 'UnsafeMutableRawBufferPointer'

è¿™æ˜¯ Swift 5.9 ä»¥ååº•å±‚å†…å­˜ API æ”¹äº†ã€‚

æ—§å†™æ³•ï¼š

withUnsafeMutableBytes { ptr in

ç°åœ¨å¿…é¡»æ˜¾å¼ï¼š

withUnsafeMutableBytes { (ptr: UnsafeMutableRawBufferPointer) in

æˆ–è€…è½¬æ¢æˆï¼š

var data = Data(bytes)
data.withUnsafeMutableBytes { ptr in

è¿™æ˜¯ Swift ç‰ˆæœ¬é—®é¢˜ã€‚

â¸»

4ï¸âƒ£ OpenAPIService æ²¡æœ‰ getActivities

Value of type 'OpenAPIService' has no member 'getActivities'

è¯´æ˜ï¼š

ğŸ‘‰ Rabby ç”¨çš„æ˜¯è€ç‰ˆæœ¬ OpenAPIService
ğŸ‘‰ ä½ å½“å‰ Pod / SPM æ‹‰çš„æ˜¯æ–°ç‰ˆæœ¬

API è¢«æ”¹åäº†ã€‚

â¸»

äºŒã€çœŸæ­£çš„æ ¸å¿ƒé—®é¢˜

ä½ ç°åœ¨çš„ç¯å¢ƒå¤§æ¦‚ç‡æ˜¯ï¼š

Xcode 15 / Swift 5.9 æˆ– 5.10
+ æœ€æ–° Pod ä¾èµ–

è€Œ Rabby 0.93.77 æ˜¯ï¼š

Xcode 14
Swift 5.7 / 5.8
è€ç‰ˆæœ¬ web3swift
è€ç‰ˆæœ¬ secp256k1

æ‰€ä»¥å…¨éƒ¨ç‚¸ã€‚

â¸»

ä¸‰ã€æ­£ç¡®è§£å†³æ–¹æ¡ˆï¼ˆæ¨èï¼‰

ä¸è¦æ”¹ä»£ç ã€‚

æ”¹ç¯å¢ƒã€‚

â¸»

âœ… ç¬¬ä¸€æ­¥ï¼šæŸ¥çœ‹ Podfile

è¿›å…¥ï¼š

mobile/ios/

æ‰§è¡Œï¼š

pod deintegrate
rm -rf Pods
rm Podfile.lock


â¸»

âœ… ç¬¬äºŒæ­¥ï¼šå®‰è£… Rabby æŒ‡å®šç‰ˆæœ¬ä¾èµ–

æ‰§è¡Œï¼š

pod install --repo-update

å¦‚æœè¿˜æŠ¥é”™ï¼Œæ‰§è¡Œï¼š

pod install --clean-install


â¸»

âœ… ç¬¬ä¸‰æ­¥ï¼šé™ä½ Swift ç‰ˆæœ¬

æ‰“å¼€ï¼š

Project â†’ Build Settings

æŠŠï¼š

Swift Language Version

æ”¹æˆï¼š

5.7


â¸»

âœ… ç¬¬å››æ­¥ï¼šç”¨ Xcode 14 æ‰“å¼€

Rabby 0.93.x åŸºæœ¬éƒ½æ˜¯ Xcode 14 ç¼–è¯‘çš„ã€‚

Xcode 15 ä¼šæŠ¥ä¸€å † UnsafeRawBufferPointer é”™è¯¯ã€‚

â¸»

å››ã€å¦‚æœä½ æƒ³ç”¨ Xcode 15 ç¼–è¯‘

é‚£å°±ä¸æ˜¯ä¿®å‡ ä¸ªæŠ¥é”™é‚£ä¹ˆç®€å•äº†ã€‚

ä½ éœ€è¦ï¼š
	â€¢	æ”¹æ‰€æœ‰ BigUInt ç±»å‹
	â€¢	æ”¹ EthereumTransaction åˆå§‹åŒ–æ–¹å¼
	â€¢	æ”¹ Web3 è°ƒç”¨æ–¹å¼
	â€¢	æ”¹ secp256k1 åº•å±‚è°ƒç”¨
	â€¢	æ”¹ OpenAPIService æ¥å£

ç­‰äºå‡çº§æ•´ä¸ª iOS é’±åŒ…æ¡†æ¶ã€‚

è¿™è‡³å°‘ 1~2 å¤©å·¥ä½œé‡ã€‚

â¸»

äº”ã€æœ€å¯èƒ½çš„æ ¹å› ï¼ˆæˆ‘åˆ¤æ–­ï¼‰

90% æ¦‚ç‡æ˜¯ï¼š

ğŸ‘‰ ä½ æ‰§è¡Œäº† pod update

æŠŠä¾èµ–å…¨éƒ¨å‡çº§äº†ã€‚

è€Œ Rabby æºç é”å®šçš„æ˜¯æ—§ APIã€‚

â¸»

å…­ã€æœ€å¿«æ¢å¤æ–¹æ¡ˆ

å¦‚æœä½ åªæ˜¯æƒ³è·‘èµ·æ¥ï¼š

ç›´æ¥é‡æ–°ä¸‹è½½å¹²å‡€æºç 

ç„¶åï¼š

cd mobile/ios
pod install

ä¸è¦æ‰§è¡Œ pod updateã€‚

â¸»

ä¸ƒã€æˆ‘è¦ç¡®è®¤ä¸€ä»¶äº‹

ä½ æ˜¯ï¼š

1ï¸âƒ£ ç›´æ¥ clone å®˜æ–¹ä»“åº“ï¼Ÿ
2ï¸âƒ£ è¿˜æ˜¯è§£å‹åˆ«äººç»™ä½ çš„ zipï¼Ÿ
3ï¸âƒ£ è¿˜æ˜¯ä½ è‡ªå·±æ”¹è¿‡ä¾èµ–ï¼Ÿ

å‘Šè¯‰æˆ‘ä½ æ˜¯æ€ä¹ˆè·å–è¿™ä¸ª Rabby 0.93.77 çš„ï¼Œæˆ‘å¯ä»¥ç»™ä½ ç²¾å‡†ä¿®å¤æ–¹æ¡ˆã€‚

â¸»

åˆ«æ‹…å¿ƒï¼Œè¿™ä¸æ˜¯ä»£ç å†™é”™ï¼Œè¿™æ˜¯å…¸å‹çš„ï¼š

åŒºå—é“¾ iOS é¡¹ç›® + ä¾èµ–ç‰ˆæœ¬åœ°ç‹±é—®é¢˜

æˆ‘è§è¿‡å¾ˆå¤šæ¬¡ã€‚

ä½ è¿™ä¸ªå¯ä»¥æ•‘ã€‚

RabbyMobile
/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Core/WalletConnectManager.swift
/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Core/WalletConnectManager.swift:182:19 Missing argument for parameter 'from' in call

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Core/WalletConnectManager.swift:183:20 Cannot convert value of type 'String' to expected argument type 'BigUInt'

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Core/WalletConnectManager.swift:184:19 Cannot convert value of type 'String' to expected argument type 'Data'

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Core/WalletConnectManager.swift:185:20 'nil' is not compatible with expected argument type 'BigUInt'

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Core/WalletConnectManager.swift:186:23 Cannot convert value of type 'String?' to expected argument type 'BigUInt'

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Core/WalletConnectManager.swift:187:23 Cannot convert value of type 'String?' to expected argument type 'BigUInt?'

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Core/WalletConnectManager.swift:188:52 Cannot convert value of type 'String?' to expected argument type 'BigUInt?'

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Core/WalletConnectManager.swift:189:68 Cannot convert value of type 'String?' to expected argument type 'BigUInt?'

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Core/WalletConnectManager.swift:190:30 Cannot convert value of type 'String' to expected argument type 'Int'

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Core/WalletConnectManager.swift:194:64 Incorrect argument labels in call (have '_:from:', expected 'address:transaction:')

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Core/WalletConnectManager.swift:194:84 Cannot convert value of type 'String' to expected argument type 'EthereumTransaction'

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Core/WalletConnectManager.swift:195:91 Extra argument 'chain' in call

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Core/WalletConnectManager.swift:214:61 Incorrect argument labels in call (have '_:from:', expected 'address:message:')

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Core/WalletConnectManager.swift:214:75 Argument 'from' must precede unnamed argument #1

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Core/WalletConnectManager.swift:230:63 Incorrect argument labels in call (have '_:from:', expected 'address:typedData:')

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Core/WalletConnectManager.swift:230:64 Cannot convert value of type '[String : Any]' to expected argument type 'String'

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Core/WatchGnosisSessionKeyrings.swift
/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Core/WatchGnosisSessionKeyrings.swift:204:31 Missing argument label 'data:' in call

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Core/WatchGnosisSessionKeyrings.swift:209:39 Missing argument label 'data:' in call

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Core/WatchGnosisSessionKeyrings.swift:213:26 No exact matches in call to static method 'hash'

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Core/WatchGnosisSessionKeyrings.swift:218:31 Missing argument label 'data:' in call

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Utils/Secp256k1Helper.swift
/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Utils/Secp256k1Helper.swift:135:25 Cannot convert value of type 'ArraySlice<UInt8>' to expected argument type 'UnsafeMutableRawBufferPointer'

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Utils/Secp256k1Helper.swift:201:33 Cannot convert value of type 'ArraySlice<UInt8>' to expected argument type 'UnsafeMutableRawBufferPointer'

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Utils/Secp256k1Helper.swift:218:35 Cannot convert value of type 'ArraySlice<UInt8>' to expected argument type 'UnsafeMutableRawBufferPointer'

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Views/Activities/ActivitiesView.swift
/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Views/Activities/ActivitiesView.swift:157:58 Value of type 'OpenAPIService' has no member 'getActivities'

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Views/AddressDetail/AddressDetailView.swift
/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Views/AddressDetail/AddressDetailView.swift:194:41 Incorrect argument label in call (have 'for:', expected 'address:')

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Views/AddressDetail/AddressDetailView.swift:198:34 Extraneous argument label 'address:' in call

/Users/macbook/Downloads/Rabby-0.93.77/mobile/ios/RabbyMobile/Views/AddressDetail/AddressDetailView.swift:240:58 Incorrect argument labels in call (have '_:for:', expected 'address:alias:')
