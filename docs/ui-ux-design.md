# Rabby Wallet Web & Admin UI/UX 完整设计方案

> 基于 Rabby 浏览器扩展插件 v0.93.77 的完整 UI/UX 照搬迁移

---

## 目录

1. [设计系统基础](#1-设计系统基础)
2. [前端 Web 应用 (apps/web)](#2-前端-web-应用)
3. [管理系统 (apps/admin)](#3-管理系统)
4. [共享组件库 (packages/ui)](#4-共享组件库)
5. [页面详细设计](#5-页面详细设计)
6. [实施优先级](#6-实施优先级)

---

## 1. 设计系统基础

### 1.1 设计令牌 (Design Tokens)

完全复用扩展插件的设计系统，使用 CSS 变量实现。

#### 颜色系统

```
双色彩系统 (CSS 变量前缀):
├── --r-*   (Rabby Design System，核心 UI)
└── --rb-*  (Rabby App Theme，品牌扩展)
```

| 令牌名 | Light Mode | Dark Mode | 用途 |
|--------|-----------|-----------|------|
| `--r-blue-default` | `rgba(76, 101, 255, 1)` | `rgba(112, 132, 255, 1)` | 主品牌色、CTA按钮 |
| `--r-blue-light-1` | `rgba(76, 101, 255, 0.1)` | `rgba(112, 132, 255, 0.1)` | 按钮hover态 |
| `--r-blue-light-2` | `rgba(76, 101, 255, 0.06)` | `rgba(112, 132, 255, 0.06)` | 背景高亮 |
| `--r-blue-disable` | `rgba(76, 101, 255, 0.4)` | `rgba(112, 132, 255, 0.4)` | 禁用态 |
| `--r-green-default` | `rgba(42, 187, 127, 1)` | `rgba(42, 187, 127, 1)` | 成功、收入 |
| `--r-orange-default` | `rgba(255, 176, 32, 1)` | `rgba(255, 198, 74, 1)` | 警告 |
| `--r-red-default` | `rgba(227, 73, 53, 1)` | `rgba(239, 92, 72, 1)` | 错误、危险 |
| `--r-neutral-title-1` | `rgba(25, 41, 69, 1)` | `rgba(247, 250, 252, 1)` | 一级标题 |
| `--r-neutral-body` | `rgba(62, 73, 94, 1)` | `rgba(211, 216, 224, 1)` | 正文 |
| `--r-neutral-foot` | `rgba(106, 117, 135, 1)` | `rgba(186, 190, 197, 1)` | 辅助文字 |
| `--r-neutral-line` | `rgba(224, 229, 236, 1)` | `rgba(255, 255, 255, 0.1)` | 分割线 |
| `--r-neutral-bg-1` | `rgba(255, 255, 255, 1)` | `rgba(12, 15, 31, 1)` | 主背景 |
| `--r-neutral-bg-2` | `rgba(242, 244, 247, 1)` | `rgba(12, 15, 31, 1)` | 次背景 |
| `--r-neutral-card-1` | `rgba(255, 255, 255, 1)` | `rgba(255, 255, 255, 0.06)` | 卡片背景 |
| `--r-neutral-card-2` | `rgba(242, 244, 247, 1)` | `rgba(255, 255, 255, 0.06)` | 卡片二级背景 |

#### 排版系统

```
字体族: SF Pro Text, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif
等宽: SF Mono, 'Fira Code', Menlo, Monaco, monospace (地址显示)

字号梯度:
├── 12px             → 辅助标签、时间戳
├── 13px             → 次要信息
├── 14px / lh 18px   → 正文默认
├── 15px / lh 18px   → 正文加强
├── 18px / lh 22px   → 小标题
├── 20px             → 页面标题
├── 24px / lh 28px   → 大标题
└── 28px / lh 33px   → 资产总额
```

#### 间距系统

```
间距梯度 (px):
0, 1, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 24, 28, 32, 40, 60, 80

常用组合:
├── 页面内边距: 20px (移动) / 24px (桌面)
├── 卡片内边距: 12px ~ 16px
├── 元素间距: 8px ~ 12px
├── 区块间距: 16px ~ 24px
└── 列表项高度: 52px ~ 60px
```

#### 圆角系统

```
├── 4px  → 小按钮、标签
├── 6px  → 输入框、小卡片
├── 8px  → 卡片、弹窗
├── 12px → 大卡片、浮层
├── 16px → 底部弹窗
└── 50%  → 头像、圆形按钮
```

#### 阴影系统

```
├── shadow-sm:  0 2px 4px rgba(0,0,0,0.04)   → 卡片
├── shadow-md:  0 4px 12px rgba(0,0,0,0.08)   → 浮层
├── shadow-lg:  0 8px 24px rgba(0,0,0,0.12)   → 弹窗
└── shadow-xl:  0 12px 36px rgba(0,0,0,0.16)  → 模态框
```

### 1.2 主题切换

```
实现方式: CSS 类切换
├── html { color-scheme: light }        → 浅色模式默认
├── html.dark { color-scheme: dark }    → 深色模式
└── 所有颜色通过 CSS 变量引用，自动适配
```

### 1.3 响应式断点

```
Web 端自适应布局:
├── xs: 0 ~ 576px      → 手机竖屏 (单列)
├── sm: 576px ~ 768px   → 手机横屏 / 小平板
├── md: 768px ~ 992px   → 平板
├── lg: 992px ~ 1200px  → 笔记本
├── xl: 1200px ~ 1600px → 桌面
└── xxl: 1600px+        → 大屏

核心内容区最大宽度: 1200px (居中)
侧边栏宽度: 240px (可收起至 64px)
```

### 1.4 动画规范

```
时间函数:
├── ease-in-out     → 通用过渡
├── ease-out        → 弹出动画
└── linear          → 加载旋转

时长:
├── 150ms → 按钮hover、开关
├── 200ms → 面板展开/收起
├── 300ms → 页面切换、模态框
└── 400ms → 复杂过渡

关键帧:
├── fadeIn / fadeOut        → 透明度渐变
├── slideInLeft/Right      → 侧滑进入
├── slideOutLeft/Right     → 侧滑退出
├── slideUp / slideDown    → 上下滑动
├── spin                   → 加载旋转 360°
└── pulse                  → 脉冲提示
```

---

## 2. 前端 Web 应用 (apps/web)

### 2.1 整体布局架构

```
┌─────────────────────────────────────────────────┐
│                  TopBar (64px)                    │
│  [Logo] [搜索] [链选择器] [通知] [账户] [主题]     │
├──────────┬──────────────────────────────────────┤
│          │                                       │
│ SideNav  │           Main Content               │
│ (240px)  │         (flex: 1, 居中)               │
│          │                                       │
│ [仪表盘]  │  ┌─────────────────────────────┐     │
│ [发送]    │  │     Page Content Area       │     │
│ [接收]    │  │     (max-width: 800px)      │     │
│ [Swap]   │  │                             │     │
│ [Bridge] │  │                             │     │
│ [历史]    │  │                             │     │
│ [NFT]    │  └─────────────────────────────┘     │
│ [Dapp]   │                                       │
│ ──────── │                                       │
│ [设置]    │                                       │
│ [安全]    │                                       │
│          │                                       │
├──────────┴──────────────────────────────────────┤
│              (移动端: BottomTabBar)               │
└─────────────────────────────────────────────────┘
```

#### 移动端布局 (< 768px)

```
┌─────────────────────┐
│    TopBar (56px)     │
│ [Menu] [Logo] [账户] │
├─────────────────────┤
│                     │
│   Main Content      │
│   (全宽, padding 16)│
│                     │
│                     │
├─────────────────────┤
│  BottomTab (56px)   │
│ [首页][发送][Swap]   │
│ [历史][更多]         │
└─────────────────────┘
```

### 2.2 完整页面路由清单

从扩展插件 1:1 照搬，适配 Web 布局:

```
/                           → 重定向到 /dashboard
/welcome                    → 欢迎引导页 (未登录用户)
/unlock                     → 解锁页面 (密码输入)
/forgot-password            → 忘记密码
/create-password            → 创建密码

/dashboard                  → 主仪表盘 (资产概览)
/dashboard/token-detail     → Token 详情 (价格图表、交易记录)

/send-token                 → 发送代币
/send-nft                   → 发送 NFT
/receive                    → 接收地址/二维码
/select-to-address          → 选择收款地址

/swap                       → 代币兑换
/bridge                     → 跨链桥

/history                    → 交易历史
/signed-text-history        → 签名历史
/activities                 → 活动记录

/approval                   → 授权管理
/token-approval             → Token 授权列表
/nft-approval               → NFT 授权列表

/nft-view                   → NFT 画廊

/dapp-search                → DApp 浏览器
/connected-sites            → 已连接站点
/request-permission         → 权限请求

/import                     → 导入入口
/import/wallet-connect      → WalletConnect 导入
/import/private-key         → 私钥导入
/import/mnemonic            → 助记词导入
/import/keystore            → Keystore JSON 导入
/import/watch               → 观察钱包
/import/hardware            → 硬件钱包
/import/hardware/ledger     → Ledger
/import/hardware/trezor     → Trezor
/import/hardware/onekey     → OneKey
/import/hardware/keystone   → Keystone (二维码)
/import/hardware/imkey      → imKey
/import/gnosis              → Gnosis Safe
/import/coinbase            → Coinbase Wallet
/import/metamask            → MetaMask 迁移
/import/cobo-argus          → Cobo Argus

/add-address                → 添加新地址
/select-address             → 选择地址 (导入后)
/import-success             → 导入成功

/address-management         → 地址管理
/address-detail             → 地址详情
/address-backup             → 地址备份

/settings                   → 设置首页
/settings/chain-list        → 链列表管理
/settings/custom-rpc        → 自定义 RPC
/settings/custom-testnet    → 自定义测试网
/settings/advance           → 高级设置
/settings/language          → 语言切换
/settings/whitelist         → 白名单管理
/settings/contacts          → 联系人管理

/gas-account                → Gas 账户
/rabby-points               → Rabby 积分
/gnosis-queue               → Gnosis 队列
```

### 2.3 核心页面详细设计

---

#### 2.3.1 仪表盘 (Dashboard)

**对标扩展插件:** `src/ui/views/Dashboard/`

```
┌──────────────────────────────────────┐
│         当前账户 (PageHeader)         │
│  [头像] 0x1234...5678  [切换▼] [复制]│
├──────────────────────────────────────┤
│                                      │
│         总资产: $12,345.67           │
│         ↑ +2.3% (24h)               │
│                                      │
│  ┌────────┐ ┌────────┐ ┌────────┐   │
│  │  发送   │ │  接收   │ │  Swap  │  │
│  │  Send   │ │Receive │ │  Swap  │   │
│  └────────┘ └────────┘ └────────┘   │
│                                      │
├──────────────────────────────────────┤
│  [Token] [NFT] [DeFi] [活动]  ← Tab │
├──────────────────────────────────────┤
│                                      │
│  Token 列表:                         │
│  ┌──────────────────────────────┐    │
│  │ [ETH icon] ETH              │    │
│  │ 1.2345 ETH    $2,345.67    │    │
│  │ +1.2%                       │    │
│  ├──────────────────────────────┤    │
│  │ [USDC icon] USDC            │    │
│  │ 5,000.00 USDC  $5,000.00   │    │
│  │ +0.01%                      │    │
│  ├──────────────────────────────┤    │
│  │ ... 更多代币                 │    │
│  └──────────────────────────────┘    │
│                                      │
└──────────────────────────────────────┘
```

**关键交互:**
- 账户切换: 点击切换按钮弹出 AccountSelectorModal
- 快捷操作: Send / Receive / Swap 三个快捷入口
- Tab 切换: Token(默认) / NFT / DeFi协议 / 活动
- Token 列表: 按价值排序，点击进入详情
- 下拉刷新: 重新加载余额数据

**数据源:**
- `GET /api/balance?address=0x...` → 总资产
- `GET /api/tokens?address=0x...` → Token 列表
- `GET /api/nft?address=0x...` → NFT 集合
- 实时价格通过 WebSocket 或轮询更新

---

#### 2.3.2 发送代币 (SendToken)

**对标扩展插件:** `src/ui/views/SendToken/`

```
┌──────────────────────────────────────┐
│  [←] 发送                            │
├──────────────────────────────────────┤
│                                      │
│  从: [当前链] [当前账户]              │
│                                      │
│  ┌──────────────────────────────┐    │
│  │ Token选择                    │    │
│  │ [ETH ▼]                     │    │
│  │                              │    │
│  │ 数量         余额: 1.234 ETH │    │
│  │ ┌────────────────────┐ [MAX]│    │
│  │ │ 0.5                │      │    │
│  │ └────────────────────┘      │    │
│  │ ≈ $950.00                   │    │
│  └──────────────────────────────┘    │
│                                      │
│  ┌──────────────────────────────┐    │
│  │ 收款地址                     │    │
│  │ ┌────────────────────┐      │    │
│  │ │ 0x... 或 ENS       │ [📋] │    │
│  │ └────────────────────┘      │    │
│  │ [从联系人选择] [最近地址]     │    │
│  │ ⚠️ 首次转账至该地址          │    │
│  └──────────────────────────────┘    │
│                                      │
│  ┌──────────────────────────────┐    │
│  │ Gas 设置          [⚙️ 编辑]  │    │
│  │ 预估 Gas: 21,000             │    │
│  │ Gas 价格: 25 Gwei            │    │
│  │ 预估费用: ~$2.50             │    │
│  │ [慢] [标准●] [快] [自定义]    │    │
│  └──────────────────────────────┘    │
│                                      │
│  ┌──────────────────────────────┐    │
│  │        [发送]  (主按钮)       │    │
│  └──────────────────────────────┘    │
│                                      │
└──────────────────────────────────────┘
```

**子组件:**
- `ChainSelector` → 链选择下拉框 (带链图标+名称)
- `TokenSelector` → Token 选择弹窗 (搜索、余额排序)
- `TokenAmountInput` → 金额输入 (MAX按钮、USD换算)
- `AddressInput` → 收款地址输入 (ENS解析、地址簿、风险检测)
- `GasSelector` → Gas设置面板 (慢/标准/快/自定义)
- `SendConfirmModal` → 发送确认弹窗 (安全检查结果)

**安全特性 (从扩展插件照搬):**
- 首次转账地址警告
- 合约地址检测提示
- 大额转账二次确认
- 地址白名单校验
- 安全规则引擎结果展示

---

#### 2.3.3 Swap 交易

**对标扩展插件:** `src/ui/views/Swap/`

```
┌──────────────────────────────────────┐
│  [←] Swap              [⚙️ 设置]    │
├──────────────────────────────────────┤
│                                      │
│  ┌──────────────────────────────┐    │
│  │ From                         │    │
│  │ [ETH ▼]     余额: 1.234 ETH │    │
│  │ ┌──────────────────┐ [MAX]  │    │
│  │ │ 0.5              │        │    │
│  │ └──────────────────┘        │    │
│  │ ≈ $950.00                   │    │
│  └──────────────────────────────┘    │
│              [🔄 反转]               │
│  ┌──────────────────────────────┐    │
│  │ To                           │    │
│  │ [USDC ▼]                    │    │
│  │ ┌──────────────────┐        │    │
│  │ │ 949.50 (预估)    │        │    │
│  │ └──────────────────┘        │    │
│  └──────────────────────────────┘    │
│                                      │
│  ┌──────────────────────────────┐    │
│  │ 滑点设置: [0.5%] [1%●] [3%] │    │
│  │ [自定义: ____%]              │    │
│  └──────────────────────────────┘    │
│                                      │
│  ┌──────────────────────────────┐    │
│  │ 报价列表:                    │    │
│  │ ┌────────────────────────┐  │    │
│  │ │ ✅ 1inch  949.50 USDC │  │    │
│  │ │    Gas: $2.30  最优     │  │    │
│  │ ├────────────────────────┤  │    │
│  │ │    Uniswap 948.20 USDC│  │    │
│  │ │    Gas: $2.50          │  │    │
│  │ ├────────────────────────┤  │    │
│  │ │    ParaSwap 947.80    │  │    │
│  │ │    Gas: $2.10          │  │    │
│  │ └────────────────────────┘  │    │
│  └──────────────────────────────┘    │
│                                      │
│  ┌──────────────────────────────┐    │
│  │ 价格影响: 0.03%              │    │
│  │ 最小接收: 944.50 USDC       │    │
│  │ 路由: ETH → WETH → USDC    │    │
│  └──────────────────────────────┘    │
│                                      │
│  ┌──────────────────────────────┐    │
│  │       [Swap]  (主按钮)       │    │
│  └──────────────────────────────┘    │
│                                      │
└──────────────────────────────────────┘
```

**子组件:**
- `TokenInput` → From/To Token 输入组 (复用)
- `SlippageSettings` → 滑点设置面板
- `QuoteList` → DEX 报价列表 (最优标记)
- `QuoteDisplay` → 详细报价信息 (价格影响、路由、最小接收)
- `SwapButton` → 智能按钮 (状态: 选择Token/输入金额/获取报价中/Swap)
- `SwapConfirmModal` → 确认弹窗 (交易详情 + 安全检查)

---

#### 2.3.4 Bridge 跨链桥

**对标扩展插件:** `src/ui/views/Bridge/`

```
┌──────────────────────────────────────┐
│  [←] Bridge                          │
├──────────────────────────────────────┤
│                                      │
│  ┌─────────┐  [🔄]  ┌─────────┐    │
│  │ From     │        │ To       │    │
│  │[Ethereum▼│        │[Arbitrum▼│    │
│  │  Chain]  │        │  Chain]  │    │
│  └─────────┘        └─────────┘    │
│                                      │
│  ┌──────────────────────────────┐    │
│  │ Token & Amount               │    │
│  │ [USDC ▼]   余额: 5,000 USDC │    │
│  │ ┌──────────────────┐ [MAX]  │    │
│  │ │ 1000             │        │    │
│  │ └──────────────────┘        │    │
│  └──────────────────────────────┘    │
│                                      │
│  ┌──────────────────────────────┐    │
│  │ 桥接路由:                    │    │
│  │ ┌────────────────────────┐  │    │
│  │ │ ✅ Across Protocol     │  │    │
│  │ │    接收: 999.50 USDC   │  │    │
│  │ │    费用: $0.50 | 2min  │  │    │
│  │ ├────────────────────────┤  │    │
│  │ │    Stargate            │  │    │
│  │ │    接收: 998.80 USDC   │  │    │
│  │ │    费用: $1.20 | 5min  │  │    │
│  │ └────────────────────────┘  │    │
│  └──────────────────────────────┘    │
│                                      │
│  ┌──────────────────────────────┐    │
│  │       [Bridge]  (主按钮)     │    │
│  └──────────────────────────────┘    │
│                                      │
└──────────────────────────────────────┘
```

---

#### 2.3.5 交易审批 (Approval Flow)

**对标扩展插件:** `src/ui/views/Approval/`

Web 端通过 WalletConnect + Modal 实现 (替代扩展弹窗)：

```
┌──────────────────────────────────────┐
│         交易确认 (Modal)              │
├──────────────────────────────────────┤
│                                      │
│  🌐 app.uniswap.org                 │
│  请求签名交易                         │
│                                      │
│  ┌──────────────────────────────┐    │
│  │ 操作解析:                    │    │
│  │ Swap 0.5 ETH → 950 USDC    │    │
│  │ via Uniswap V3 Router       │    │
│  └──────────────────────────────┘    │
│                                      │
│  ┌──────────────────────────────┐    │
│  │ 安全检查:                    │    │
│  │ ✅ 已知合约: Uniswap Router │    │
│  │ ✅ 无异常授权                │    │
│  │ ⚠️ 滑点偏高: 3%             │    │
│  │ [查看详情 →]                 │    │
│  └──────────────────────────────┘    │
│                                      │
│  ┌──────────────────────────────┐    │
│  │ Gas 设置:                    │    │
│  │ Gas: 150,000 | 25 Gwei      │    │
│  │ ≈ $3.75                     │    │
│  │ [编辑]                       │    │
│  └──────────────────────────────┘    │
│                                      │
│  ┌──────────────────────────────┐    │
│  │ 交易数据: (可展开)           │    │
│  │ Function: swapExactTokens... │    │
│  │ [展开原始数据]               │    │
│  └──────────────────────────────┘    │
│                                      │
│  ┌──────────┐    ┌──────────┐       │
│  │  拒绝     │    │  确认     │       │
│  └──────────┘    └──────────┘       │
│                                      │
└──────────────────────────────────────┘
```

**安全规则可视化 (从扩展照搬):**
- 风险等级: 安全(绿) / 警告(橙) / 危险(红) / 禁止(黑)
- 交易解码: 人类可读的操作描述
- 合约信息: 已知合约名称、审计状态
- 授权额度: unlimited 授权警告
- 钓鱼检测: 已知钓鱼地址标记

---

#### 2.3.6 地址管理 (Address Management)

**对标扩展插件:** `src/ui/views/AddressManagement/`

```
┌──────────────────────────────────────┐
│  [←] 地址管理         [+ 添加地址]   │
├──────────────────────────────────────┤
│                                      │
│  [全部] [HD] [导入] [硬件] [观察]    │
│                                      │
│  HD 钱包 (3)                    [▼]  │
│  ┌──────────────────────────────┐    │
│  │ [🔵] Account 1               │    │
│  │ 0x1234...5678                │    │
│  │ $12,345.67                   │    │
│  │ ETH, Arbitrum, Polygon  [✏️] │    │
│  ├──────────────────────────────┤    │
│  │ [🔵] Account 2               │    │
│  │ 0xabcd...ef01                │    │
│  │ $5,432.10                    │    │
│  ├──────────────────────────────┤    │
│  │ [🔵] Account 3               │    │
│  │ 0x9876...5432                │    │
│  │ $890.00                      │    │
│  └──────────────────────────────┘    │
│                                      │
│  导入的地址 (1)                 [▼]  │
│  ┌──────────────────────────────┐    │
│  │ [🟢] My DeFi Wallet          │    │
│  │ 0xffff...0000                │    │
│  │ $25,000.00                   │    │
│  └──────────────────────────────┘    │
│                                      │
│  Ledger (2)                    [▼]  │
│  ┌──────────────────────────────┐    │
│  │ [🔷] Ledger 1                │    │
│  │ 0x1111...2222                │    │
│  │ $50,000.00                   │    │
│  ├──────────────────────────────┤    │
│  │ [🔷] Ledger 2                │    │
│  │ 0x3333...4444                │    │
│  │ $10,000.00                   │    │
│  └──────────────────────────────┘    │
│                                      │
│  观察钱包 (1)                   [▼]  │
│  ┌──────────────────────────────┐    │
│  │ [👁] vitalik.eth             │    │
│  │ 0xd8dA...6045                │    │
│  │ 只读                         │    │
│  └──────────────────────────────┘    │
│                                      │
└──────────────────────────────────────┘
```

**操作菜单 (地址右键/长按):**
- 切换到该账户
- 编辑别名
- 复制地址
- 查看详情
- 导出私钥/助记词 (需密码验证)
- 删除地址

---

#### 2.3.7 设置页面 (Settings)

**对标扩展插件:** `src/ui/views/Settings/`

```
┌──────────────────────────────────────┐
│  [←] 设置                            │
├──────────────────────────────────────┤
│                                      │
│  通用设置                             │
│  ┌──────────────────────────────┐    │
│  │ 🌐 语言          [简体中文 >] │    │
│  │ 🎨 主题          [自动 >]    │    │
│  │ 💱 货币单位       [USD >]    │    │
│  └──────────────────────────────┘    │
│                                      │
│  网络设置                             │
│  ┌──────────────────────────────┐    │
│  │ ⛓️ 链列表管理     [>]        │    │
│  │ 🔗 自定义 RPC    [>]        │    │
│  │ 🧪 测试网        [>]        │    │
│  └──────────────────────────────┘    │
│                                      │
│  安全设置                             │
│  ┌──────────────────────────────┐    │
│  │ 🔒 自动锁定       [5分钟 >]  │    │
│  │ 📋 地址白名单     [>]        │    │
│  │ 🔑 修改密码       [>]        │    │
│  └──────────────────────────────┘    │
│                                      │
│  高级设置                             │
│  ┌──────────────────────────────┐    │
│  │ 👥 联系人管理     [>]        │    │
│  │ 🔔 通知设置       [>]        │    │
│  │ 📊 数据导出       [>]        │    │
│  │ 🗑️ 重置钱包       [>]        │    │
│  └──────────────────────────────┘    │
│                                      │
│  关于                                │
│  ┌──────────────────────────────┐    │
│  │ 版本: 1.0.0                  │    │
│  │ 🔗 官网 | 文档 | GitHub      │    │
│  └──────────────────────────────┘    │
│                                      │
└──────────────────────────────────────┘
```

---

#### 2.3.8 NFT 画廊 (NFT View)

**对标扩展插件:** `src/ui/views/NFTView/`

```
┌──────────────────────────────────────┐
│  [←] NFT 收藏         [切换视图 ▤▦] │
├──────────────────────────────────────┤
│                                      │
│  Collections (5)                     │
│  ┌────────┐ ┌────────┐ ┌────────┐  │
│  │ [NFT]  │ │ [NFT]  │ │ [NFT]  │  │
│  │ Bored  │ │ Azuki  │ │ Pudgy  │  │
│  │ Ape #42│ │  #123  │ │  #456  │  │
│  │ 3 items│ │ 1 item │ │ 2 items│  │
│  └────────┘ └────────┘ └────────┘  │
│  ┌────────┐ ┌────────┐              │
│  │ [NFT]  │ │ [NFT]  │              │
│  │Milady  │ │ ENS    │              │
│  │  #789  │ │  #001  │              │
│  │ 1 item │ │ 5 items│              │
│  └────────┘ └────────┘              │
│                                      │
│  ─── 点击集合展开 ───                 │
│                                      │
│  Bored Ape Yacht Club (3)           │
│  ┌────────┐ ┌────────┐ ┌────────┐  │
│  │ [图片]  │ │ [图片]  │ │ [图片]  │  │
│  │  #42   │ │  #108  │ │  #337  │  │
│  │ 50 ETH │ │ 45 ETH │ │ 48 ETH │  │
│  │ [发送]  │ │ [发送]  │ │ [发送]  │  │
│  └────────┘ └────────┘ └────────┘  │
│                                      │
└──────────────────────────────────────┘
```

**NFT 详情弹窗:**
- 大图预览
- 名称、ID、合约地址
- 属性列表 (traits)
- 所在链
- 操作: 发送 / 在 OpenSea 查看

---

#### 2.3.9 交易历史 (History)

**对标扩展插件:** `src/ui/views/TransactionHistory/`

```
┌──────────────────────────────────────┐
│  [←] 交易历史     [全部链 ▼] [筛选]  │
├──────────────────────────────────────┤
│                                      │
│  今天                                │
│  ┌──────────────────────────────┐    │
│  │ ↑ 发送 ETH          -0.5 ETH│    │
│  │ → 0x1234...5678             │    │
│  │ [ETH链] 2min ago   ✅ 成功  │    │
│  │ Tx: 0xabcd... [🔗 浏览器]    │    │
│  ├──────────────────────────────┤    │
│  │ 🔄 Swap                     │    │
│  │ 0.3 ETH → 570 USDC         │    │
│  │ [ETH链] 1h ago     ✅ 成功  │    │
│  │ via Uniswap                 │    │
│  └──────────────────────────────┘    │
│                                      │
│  昨天                                │
│  ┌──────────────────────────────┐    │
│  │ 🌉 Bridge                   │    │
│  │ 1000 USDC (ETH → ARB)      │    │
│  │ [跨链] 12h ago     ✅ 成功  │    │
│  │ via Across Protocol         │    │
│  ├──────────────────────────────┤    │
│  │ ↓ 接收 ETH          +2 ETH │    │
│  │ ← 0xffff...0000             │    │
│  │ [ETH链] 18h ago    ✅ 成功  │    │
│  ├──────────────────────────────┤    │
│  │ ✅ 授权 USDC                │    │
│  │ → Uniswap Router            │    │
│  │ 额度: Unlimited             │    │
│  │ [ETH链] 20h ago    ✅ 成功  │    │
│  └──────────────────────────────┘    │
│                                      │
│  ┌──────────────────────────────┐    │
│  │       [加载更多...]           │    │
│  └──────────────────────────────┘    │
│                                      │
└──────────────────────────────────────┘
```

**交易类型图标与颜色:**
- ↑ 发送: 红色箭头
- ↓ 接收: 绿色箭头
- 🔄 Swap: 蓝色循环
- 🌉 Bridge: 紫色桥
- ✅ 授权: 橙色盾牌
- ❌ 失败: 红色叉
- ⏳ 待定: 灰色时钟

---

#### 2.3.10 DApp 浏览器

**对标扩展插件:** `src/ui/views/DappSearch/`

```
┌──────────────────────────────────────┐
│  [←] DApp 浏览器                     │
├──────────────────────────────────────┤
│                                      │
│  ┌──────────────────────────────┐    │
│  │ 🔍 搜索 DApp 名称或 URL...   │    │
│  └──────────────────────────────┘    │
│                                      │
│  热门分类:                           │
│  [DeFi] [DEX] [借贷] [NFT]          │
│  [游戏] [工具] [社交] [DAO]          │
│                                      │
│  推荐 DApp:                          │
│  ┌──────────┐ ┌──────────┐          │
│  │ [Logo]   │ │ [Logo]   │          │
│  │ Uniswap  │ │ Aave     │          │
│  │ DEX      │ │ 借贷     │          │
│  │ ★ 4.8    │ │ ★ 4.7    │          │
│  └──────────┘ └──────────┘          │
│  ┌──────────┐ ┌──────────┐          │
│  │ [Logo]   │ │ [Logo]   │          │
│  │ OpenSea  │ │ Lido     │          │
│  │ NFT市场  │ │ 质押     │          │
│  │ ★ 4.6    │ │ ★ 4.9    │          │
│  └──────────┘ └──────────┘          │
│                                      │
│  最近使用:                           │
│  ┌──────────────────────────────┐    │
│  │ [Uniswap] [Curve] [1inch]   │    │
│  └──────────────────────────────┘    │
│                                      │
└──────────────────────────────────────┘
```

---

#### 2.3.11 授权管理 (Token/NFT Approval)

**对标扩展插件:** `src/ui/views/Approval/` + `ApprovalManagePage`

```
┌──────────────────────────────────────┐
│  [←] 授权管理                        │
├──────────────────────────────────────┤
│                                      │
│  [Token 授权] [NFT 授权]  ← Tab      │
│                                      │
│  ⚠️ 风险提醒: 发现 2 项高风险授权      │
│  [一键撤销高风险]                      │
│                                      │
│  Token 授权列表:                      │
│  ┌──────────────────────────────┐    │
│  │ 🔴 USDC → Unknown Contract  │    │
│  │ 额度: Unlimited             │    │
│  │ 0x5555...6666               │    │
│  │ 风险: 高 (未验证合约)         │    │
│  │ 授权时间: 2024-01-15        │    │
│  │                    [撤销]    │    │
│  ├──────────────────────────────┤    │
│  │ 🟢 USDC → Uniswap Router   │    │
│  │ 额度: 10,000 USDC          │    │
│  │ 0x68b3...E22d              │    │
│  │ 风险: 低 (已审计合约)         │    │
│  │ 授权时间: 2024-02-01        │    │
│  │              [修改] [撤销]   │    │
│  ├──────────────────────────────┤    │
│  │ 🟡 WETH → 1inch Router     │    │
│  │ 额度: Unlimited            │    │
│  │ 0x1111...9999              │    │
│  │ 风险: 中 (Unlimited 授权)   │    │
│  │              [修改] [撤销]   │    │
│  └──────────────────────────────┘    │
│                                      │
└──────────────────────────────────────┘
```

---

#### 2.3.12 接收 (Receive)

**对标扩展插件:** `src/ui/views/Receive/`

```
┌──────────────────────────────────────┐
│  [←] 接收                            │
├──────────────────────────────────────┤
│                                      │
│           ┌───────────┐              │
│           │           │              │
│           │  [QR Code]│              │
│           │           │              │
│           │  200x200  │              │
│           │           │              │
│           └───────────┘              │
│                                      │
│  ┌──────────────────────────────┐    │
│  │ 0x1234567890abcdef12345678  │    │
│  │ 90abcdef1234567890abcdef   │    │
│  │                    [📋 复制] │    │
│  └──────────────────────────────┘    │
│                                      │
│  支持的网络:                          │
│  [ETH] [BSC] [Polygon] [Arbitrum]   │
│  [Optimism] [Avalanche] [+更多]     │
│                                      │
│  ⚠️ 请确保发送方使用正确的网络        │
│                                      │
└──────────────────────────────────────┘
```

---

#### 2.3.13 Gas 账户

**对标扩展插件:** `src/ui/views/GasAccount/`

```
┌──────────────────────────────────────┐
│  [←] Gas 账户                        │
├──────────────────────────────────────┤
│                                      │
│  ┌──────────────────────────────┐    │
│  │ Gas 余额                     │    │
│  │ $25.50                      │    │
│  │ [充值] [提取]                │    │
│  └──────────────────────────────┘    │
│                                      │
│  最近 Gas 消耗:                      │
│  ┌──────────────────────────────┐    │
│  │ Swap (ETH) -$2.30  2h ago  │    │
│  │ Send (ARB) -$0.15  5h ago  │    │
│  │ Bridge     -$3.50  1d ago  │    │
│  └──────────────────────────────┘    │
│                                      │
└──────────────────────────────────────┘
```

---

#### 2.3.14 Rabby Points 积分

**对标扩展插件:** `src/ui/views/RabbyPoints/`

```
┌──────────────────────────────────────┐
│  [←] Rabby Points                    │
├──────────────────────────────────────┤
│                                      │
│  ┌──────────────────────────────┐    │
│  │     🏆 我的积分: 12,500      │    │
│  │     排名: #1,234             │    │
│  └──────────────────────────────┘    │
│                                      │
│  活动任务:                           │
│  ┌──────────────────────────────┐    │
│  │ ✅ 每日签到        +100 pts │    │
│  │ ⬜ 完成一笔 Swap   +200 pts │    │
│  │ ⬜ 邀请好友         +500 pts │    │
│  │ ✅ 连接硬件钱包     +300 pts │    │
│  └──────────────────────────────┘    │
│                                      │
│  排行榜:                             │
│  ┌──────────────────────────────┐    │
│  │ 🥇 0x1234...  50,000 pts   │    │
│  │ 🥈 0xabcd...  45,000 pts   │    │
│  │ 🥉 0xffff...  42,000 pts   │    │
│  └──────────────────────────────┘    │
│                                      │
└──────────────────────────────────────┘
```

---

### 2.4 全局组件清单

从扩展插件的 62 个组件类别中提取，适配 Web 端：

| 组件 | 来源路径 | Web 适配 | 优先级 |
|------|----------|----------|--------|
| `PageHeader` | `component/PageHeader` | 改为 TopBar + Breadcrumb | P0 |
| `AccountSelector` | `component/AccountSelector` | Modal → Dropdown | P0 |
| `TokenSelector` | `component/TokenSelector` | 完全复用 | P0 |
| `ChainSelector` | `component/ChainSelector` | 完全复用 | P0 |
| `TokenAmountInput` | `component/TokenAmountInput` | 完全复用 | P0 |
| `AddressViewer` | `component/AddressViewer` | 完全复用 | P0 |
| `Modal/Popup` | `component/Modal` | 使用 AntD Modal | P0 |
| `Loading/Spin` | `component/Loading` | 完全复用 | P0 |
| `Copy/CopyChecked` | `component/Copy` | 完全复用 | P0 |
| `ScanCopyQRCode` | `component/ScanCopyQRCode` | QR生成 (扫描改为上传) | P0 |
| `TxHistory` | `component/TxHistory` | 扩展为表格+列表双视图 | P1 |
| `TokenWithChain` | `component/TokenWithChain` | 完全复用 | P0 |
| `Contact` | `component/Contact` | 完全复用 | P1 |
| `Whitelist` | `component/Whitelist` | 完全复用 | P1 |
| `AuthenticationModal` | `component/AuthenticationModal` | 完全复用 | P0 |
| `AddressList` | `component/AddressList` | 完全复用 | P0 |
| `PillsSwitch` | `component/PillsSwitch` | 完全复用 | P1 |
| `ThemeMode` | `component/ThemeMode` | 完全复用 | P1 |
| `Field` | `component/Field` | 完全复用 | P0 |
| `Empty` | `component/Empty` | 完全复用 | P1 |
| `Alert/ErrorAlert` | `component/Alert` | 使用 AntD Alert | P1 |
| `Tooltip` | `component/Tooltip` | 使用 AntD Tooltip | P1 |
| `Navbar` | `component/Navbar` | 改为 SideNav | P0 |
| `MiniSignV2` | `component/MiniSignV2` | WalletConnect签名器 | P1 |
| `WordsMatrix` | `component/WordsMatrix` | 完全复用 | P1 |
| `QRCodeReader` | `component/QRCodeReader` | 摄像头/图片上传 | P2 |

---

## 3. 管理系统 (apps/admin)

### 3.1 整体布局

```
┌─────────────────────────────────────────────────┐
│               Admin TopBar (64px)                │
│  [Logo] Rabby Admin    [通知🔔] [admin ▼] [退出] │
├──────────┬──────────────────────────────────────┤
│          │                                       │
│ SideMenu │         Content Area                 │
│ (256px)  │         (padding: 24px)              │
│          │                                       │
│ 📊 概览   │                                       │
│ 👥 用户   │                                       │
│ ⛓️ 链配置  │                                       │
│ 🪙 代币   │                                       │
│ 🔒 安全   │                                       │
│ 📱 DApp  │                                       │
│ 📜 审计   │                                       │
│ ⚙️ 系统   │                                       │
│          │                                       │
├──────────┴──────────────────────────────────────┤
│  Footer: © 2024 Rabby Wallet                     │
└─────────────────────────────────────────────────┘
```

### 3.2 页面路由清单

```
/admin/login                → 管理员登录
/admin/                     → 重定向到概览

/admin/dashboard            → 概览仪表盘
/admin/dashboard/stats      → 详细统计

/admin/users                → 用户管理
/admin/users/:id            → 用户详情
/admin/users/analytics      → 用户分析

/admin/chains               → 链配置管理
/admin/chains/add           → 添加链
/admin/chains/:id/edit      → 编辑链配置
/admin/chains/rpc           → RPC 节点管理

/admin/tokens               → 代币管理
/admin/tokens/list          → 代币白名单
/admin/tokens/blacklist     → 代币黑名单
/admin/tokens/prices        → 价格源管理

/admin/security             → 安全中心
/admin/security/rules       → 安全规则管理
/admin/security/phishing    → 钓鱼地址库
/admin/security/contracts   → 合约白名单
/admin/security/alerts      → 安全告警

/admin/dapps                → DApp 管理
/admin/dapps/list           → DApp 列表
/admin/dapps/categories     → 分类管理
/admin/dapps/review         → 审核队列

/admin/audit                → 审计日志
/admin/audit/operations     → 操作日志
/admin/audit/api-logs       → API 调用日志

/admin/system               → 系统设置
/admin/system/admins        → 管理员管理
/admin/system/roles         → 角色权限 (RBAC)
/admin/system/api-keys      → API Key 管理
/admin/system/config        → 全局配置
```

### 3.3 核心页面设计

---

#### 3.3.1 管理概览仪表盘

```
┌──────────────────────────────────────────────────┐
│  概览仪表盘                    时间范围: [7天 ▼]  │
├──────────────────────────────────────────────────┤
│                                                   │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────┐│
│  │ 总用户    │ │ 活跃用户  │ │ 总交易数  │ │总资产 ││
│  │  12,345  │ │  3,456   │ │  89,012  │ │$50M  ││
│  │ ↑ +12%   │ │ ↑ +8%    │ │ ↑ +15%   │ │↑+5%  ││
│  └──────────┘ └──────────┘ └──────────┘ └──────┘│
│                                                   │
│  ┌────────────────────────┐ ┌───────────────────┐│
│  │ 用户增长趋势 (折线图)   │ │ 交易分布 (饼图)    ││
│  │                        │ │                   ││
│  │     📈                 │ │   🔄 Swap 45%     ││
│  │    /  \                │ │   ↑ Send 30%      ││
│  │   /    \    /\         │ │   🌉 Bridge 15%   ││
│  │  /      \  /  \        │ │   ✅ Approve 10%  ││
│  │ /        \/    \       │ │                   ││
│  └────────────────────────┘ └───────────────────┘│
│                                                   │
│  ┌────────────────────────┐ ┌───────────────────┐│
│  │ 链使用分布 (柱状图)     │ │ 最近安全事件       ││
│  │                        │ │                   ││
│  │ ETH  ████████ 45%     │ │ 🔴 钓鱼地址检测 x3 ││
│  │ ARB  █████ 25%        │ │ 🟡 异常授权 x5     ││
│  │ BSC  ████ 15%         │ │ 🟢 正常 x892       ││
│  │ POLY ██ 10%           │ │                   ││
│  │ Other █ 5%            │ │ [查看全部 →]       ││
│  └────────────────────────┘ └───────────────────┘│
│                                                   │
│  最近操作:                                        │
│  ┌──────────────────────────────────────────────┐│
│  │ admin  更新了ETH链RPC配置    2min ago         ││
│  │ admin  添加了新的钓鱼地址     15min ago         ││
│  │ system 检测到异常API调用      1h ago           ││
│  └──────────────────────────────────────────────┘│
│                                                   │
└──────────────────────────────────────────────────┘
```

---

#### 3.3.2 用户管理

```
┌──────────────────────────────────────────────────┐
│  用户管理              [导出] [+ 添加用户]         │
├──────────────────────────────────────────────────┤
│                                                   │
│  [🔍 搜索地址/用户名...]  [状态: 全部▼] [排序▼]    │
│                                                   │
│  ┌──────────────────────────────────────────────┐│
│  │ 地址          │ 别名    │ 余额      │ 状态   ││
│  │───────────────┼────────┼──────────┼────────││
│  │ 0x1234...5678 │ Alice  │ $12,345  │ 🟢 活跃 ││
│  │ 0xabcd...ef01 │ Bob    │ $5,432   │ 🟢 活跃 ││
│  │ 0x9876...5432 │ -      │ $890     │ 🟡 不活跃││
│  │ 0xffff...0000 │ Charlie│ $25,000  │ 🔴 封禁 ││
│  └──────────────────────────────────────────────┘│
│                                                   │
│  第 1 页，共 25 页  [< 上一页] [下一页 >]          │
│                                                   │
└──────────────────────────────────────────────────┘
```

**用户详情页:**
- 基本信息 (地址、别名、创建时间、最后活跃)
- 资产概览 (各链余额)
- 交易历史
- 安全事件
- 授权列表
- 操作: 封禁/解封、发送通知、重置

---

#### 3.3.3 链配置管理

```
┌──────────────────────────────────────────────────┐
│  链配置管理                      [+ 添加新链]     │
├──────────────────────────────────────────────────┤
│                                                   │
│  ┌──────────────────────────────────────────────┐│
│  │ 链     │ ID   │ RPC状态 │ 启用 │ 操作       ││
│  │────────┼──────┼────────┼─────┼───────────││
│  │ [🔵]ETH│ 1    │ ✅ 正常 │ ✅   │ [编辑][删除]││
│  │ [🔵]ARB│ 42161│ ✅ 正常 │ ✅   │ [编辑][删除]││
│  │ [🟡]BSC│ 56   │ ⚠️ 慢  │ ✅   │ [编辑][删除]││
│  │ [🔵]POL│ 137  │ ✅ 正常 │ ✅   │ [编辑][删除]││
│  │ [🔴]FTM│ 250  │ ❌ 离线 │ ❌   │ [编辑][删除]││
│  └──────────────────────────────────────────────┘│
│                                                   │
└──────────────────────────────────────────────────┘
```

**链配置编辑:**
```
┌──────────────────────────────────┐
│  编辑链配置: Ethereum             │
├──────────────────────────────────┤
│                                   │
│  基本信息:                        │
│  名称: [Ethereum        ]        │
│  Chain ID: [1            ]       │
│  Server ID: [eth         ]       │
│  原生代币: [ETH          ]       │
│  代币精度: [18           ]       │
│                                   │
│  RPC 配置:                        │
│  主 RPC: [https://eth.llamarpc.com]
│  备用 RPC 1: [https://...       ]│
│  备用 RPC 2: [https://...       ]│
│  [+ 添加备用 RPC]                 │
│                                   │
│  浏览器:                          │
│  区块浏览器: [https://etherscan.io]
│  API URL: [https://api.etherscan.io]
│                                   │
│  功能开关:                        │
│  [✅] Swap 支持                   │
│  [✅] Bridge 支持                 │
│  [✅] NFT 支持                    │
│  [  ] 测试网                      │
│                                   │
│  [取消]              [保存]       │
└──────────────────────────────────┘
```

---

#### 3.3.4 安全规则管理

```
┌──────────────────────────────────────────────────┐
│  安全规则管理                    [+ 创建规则]     │
├──────────────────────────────────────────────────┤
│                                                   │
│  [全部] [交易] [授权] [签名] [地址]               │
│                                                   │
│  ┌──────────────────────────────────────────────┐│
│  │ 规则名称          │ 类型  │ 级别 │ 状态│操作 ││
│  │──────────────────┼──────┼─────┼────┼─────││
│  │ 大额转账警告       │ 交易  │ ⚠️   │ ✅  │[编辑]││
│  │ Unlimited授权警告  │ 授权  │ ⚠️   │ ✅  │[编辑]││
│  │ 钓鱼地址拦截       │ 地址  │ 🔴   │ ✅  │[编辑]││
│  │ 新合约交互提示     │ 交易  │ 💬   │ ✅  │[编辑]││
│  │ 非标准ERC20检测    │ 授权  │ 🔴   │ ✅  │[编辑]││
│  └──────────────────────────────────────────────┘│
│                                                   │
│  ── 钓鱼地址库 ──                                  │
│                                                   │
│  ┌──────────────────────────────────────────────┐│
│  │ 地址                │ 标签      │ 添加时间    ││
│  │ 0xBAD1...DEAD       │ 已知钓鱼  │ 2024-02-01 ││
│  │ 0xSCAM...0001       │ 蜜罐合约  │ 2024-01-28 ││
│  │ [+ 批量导入] [+ 手动添加]                      ││
│  └──────────────────────────────────────────────┘│
│                                                   │
└──────────────────────────────────────────────────┘
```

---

#### 3.3.5 DApp 管理

```
┌──────────────────────────────────────────────────┐
│  DApp 管理                                        │
├──────────────────────────────────────────────────┤
│                                                   │
│  [已上架] [待审核(3)] [已拒绝]                     │
│                                                   │
│  ┌──────────────────────────────────────────────┐│
│  │ Logo │ 名称     │ 分类│ 链    │ 状态  │ 操作 ││
│  │──────┼─────────┼────┼──────┼──────┼──────││
│  │ [🦄] │ Uniswap │ DEX│ 多链  │ ✅上架│ [编辑]││
│  │ [👻] │ Aave    │ 借贷│ 多链  │ ✅上架│ [编辑]││
│  │ [🌊] │ Curve   │ DEX│ 多链  │ ✅上架│ [编辑]││
│  │ [❓] │ NewDApp │ DEX│ ETH  │ ⏳审核│ [审核]││
│  └──────────────────────────────────────────────┘│
│                                                   │
└──────────────────────────────────────────────────┘
```

---

#### 3.3.6 审计日志

```
┌──────────────────────────────────────────────────┐
│  审计日志                  [导出] [时间筛选 ▼]     │
├──────────────────────────────────────────────────┤
│                                                   │
│  ┌──────────────────────────────────────────────┐│
│  │ 时间          │操作者│操作        │详情       ││
│  │──────────────┼─────┼──────────┼──────────││
│  │ 02-12 10:30  │admin│更新链配置  │ETH RPC   ││
│  │ 02-12 09:15  │admin│添加钓鱼地址│0xBAD...  ││
│  │ 02-12 08:00  │sys  │API限流触发 │IP:1.2.3.4││
│  │ 02-11 23:45  │admin│修改安全规则│大额转账   ││
│  │ 02-11 22:00  │sys  │健康检查失败│BSC RPC   ││
│  └──────────────────────────────────────────────┘│
│                                                   │
│  第 1 页，共 100 页  [< 上一页] [下一页 >]         │
│                                                   │
└──────────────────────────────────────────────────┘
```

---

#### 3.3.7 系统设置 - RBAC 角色管理

```
┌──────────────────────────────────────────────────┐
│  角色权限管理                   [+ 创建角色]       │
├──────────────────────────────────────────────────┤
│                                                   │
│  ┌──────────────────────────────────────────────┐│
│  │ 角色      │ 描述          │ 成员数│ 操作     ││
│  │──────────┼──────────────┼──────┼─────────││
│  │ 超级管理员│ 所有权限       │ 1    │ [查看]   ││
│  │ 运营     │ 用户/DApp/内容 │ 3    │ [编辑]   ││
│  │ 安全     │ 安全规则/审计   │ 2    │ [编辑]   ││
│  │ 只读     │ 仅查看         │ 5    │ [编辑]   ││
│  └──────────────────────────────────────────────┘│
│                                                   │
│  ── 权限矩阵 ──                                   │
│                                                   │
│  ┌──────────────────────────────────────────────┐│
│  │ 功能     │超管│运营│安全│只读               ││
│  │─────────┼───┼───┼───┼───               ││
│  │ 用户管理 │ RW│ RW│ R │ R                 ││
│  │ 链配置   │ RW│ R │ R │ R                 ││
│  │ 安全规则 │ RW│ R │ RW│ R                 ││
│  │ DApp管理 │ RW│ RW│ R │ R                 ││
│  │ 审计日志 │ RW│ R │ RW│ R                 ││
│  │ 系统设置 │ RW│ - │ - │ -                 ││
│  └──────────────────────────────────────────────┘│
│                                                   │
└──────────────────────────────────────────────────┘
```

---

## 4. 共享组件库 (packages/ui)

建议新增 `packages/ui` 包，供 `apps/web` 和 `apps/admin` 共用。

### 4.1 包结构

```
packages/ui/
├── src/
│   ├── theme/
│   │   ├── tokens.ts           # 设计令牌 (颜色、间距、字号)
│   │   ├── cssVariables.ts     # CSS 变量生成器
│   │   ├── ThemeProvider.tsx    # 主题提供者 (light/dark)
│   │   └── useTheme.ts         # 主题 hook
│   │
│   ├── components/
│   │   ├── Button/             # 按钮 (Primary/Secondary/Text/Danger)
│   │   ├── Input/              # 输入框
│   │   ├── Modal/              # 模态框
│   │   ├── Card/               # 卡片
│   │   ├── Loading/            # 加载态
│   │   ├── Empty/              # 空状态
│   │   ├── Copy/               # 复制组件
│   │   ├── Tooltip/            # 工具提示
│   │   ├── Alert/              # 提示信息
│   │   └── Badge/              # 徽标
│   │
│   ├── web3/                   # Web3 专属组件
│   │   ├── AddressViewer/      # 地址显示 (缩略+复制)
│   │   ├── TokenIcon/          # Token 图标 (带链标)
│   │   ├── ChainIcon/          # 链图标
│   │   ├── TokenAmountInput/   # Token 金额输入
│   │   ├── ChainSelector/      # 链选择器
│   │   ├── TokenSelector/      # Token 选择器
│   │   ├── AccountSelector/    # 账户选择器
│   │   ├── QRCode/             # 二维码生成
│   │   ├── GasDisplay/         # Gas 信息展示
│   │   ├── TxStatusBadge/      # 交易状态徽章
│   │   └── RiskLevel/          # 风险等级指示器
│   │
│   ├── layouts/
│   │   ├── AppLayout/          # Web 端布局 (SideNav + Content)
│   │   ├── AdminLayout/        # Admin 端布局 (AntD ProLayout)
│   │   └── AuthLayout/         # 认证页布局 (居中卡片)
│   │
│   └── index.ts                # 统一导出
│
├── package.json
└── tsconfig.json
```

### 4.2 主题系统实现

```typescript
// packages/ui/src/theme/tokens.ts
export const lightTheme = {
  // 品牌色
  '--r-blue-default': 'rgba(76, 101, 255, 1)',
  '--r-blue-light-1': 'rgba(76, 101, 255, 0.1)',
  '--r-blue-light-2': 'rgba(76, 101, 255, 0.06)',
  '--r-blue-disable': 'rgba(76, 101, 255, 0.4)',

  // 状态色
  '--r-green-default': 'rgba(42, 187, 127, 1)',
  '--r-orange-default': 'rgba(255, 176, 32, 1)',
  '--r-red-default': 'rgba(227, 73, 53, 1)',

  // 中性色
  '--r-neutral-title-1': 'rgba(25, 41, 69, 1)',
  '--r-neutral-body': 'rgba(62, 73, 94, 1)',
  '--r-neutral-foot': 'rgba(106, 117, 135, 1)',
  '--r-neutral-line': 'rgba(224, 229, 236, 1)',
  '--r-neutral-bg-1': 'rgba(255, 255, 255, 1)',
  '--r-neutral-bg-2': 'rgba(242, 244, 247, 1)',
  '--r-neutral-card-1': 'rgba(255, 255, 255, 1)',
  '--r-neutral-card-2': 'rgba(242, 244, 247, 1)',
};

export const darkTheme = {
  '--r-blue-default': 'rgba(112, 132, 255, 1)',
  '--r-blue-light-1': 'rgba(112, 132, 255, 0.1)',
  '--r-blue-light-2': 'rgba(112, 132, 255, 0.06)',
  '--r-blue-disable': 'rgba(112, 132, 255, 0.4)',

  '--r-green-default': 'rgba(42, 187, 127, 1)',
  '--r-orange-default': 'rgba(255, 198, 74, 1)',
  '--r-red-default': 'rgba(239, 92, 72, 1)',

  '--r-neutral-title-1': 'rgba(247, 250, 252, 1)',
  '--r-neutral-body': 'rgba(211, 216, 224, 1)',
  '--r-neutral-foot': 'rgba(186, 190, 197, 1)',
  '--r-neutral-line': 'rgba(255, 255, 255, 0.1)',
  '--r-neutral-bg-1': 'rgba(12, 15, 31, 1)',
  '--r-neutral-bg-2': 'rgba(12, 15, 31, 1)',
  '--r-neutral-card-1': 'rgba(255, 255, 255, 0.06)',
  '--r-neutral-card-2': 'rgba(255, 255, 255, 0.06)',
};
```

---

## 5. 页面详细设计 - 导入流程

### 5.1 导入方式选择

**对标扩展插件:** `src/ui/views/AddAddress/`

```
┌──────────────────────────────────────┐
│  [←] 添加钱包                        │
├──────────────────────────────────────┤
│                                      │
│  创建新钱包                           │
│  ┌──────────────────────────────┐    │
│  │ 🔑 创建新的助记词钱包         │    │
│  │ 生成一个新的 12 词助记词      │    │
│  └──────────────────────────────┘    │
│                                      │
│  导入已有钱包                         │
│  ┌──────────────────────────────┐    │
│  │ 📝 助记词                    │    │
│  │ 导入 12/24 词助记词          │    │
│  ├──────────────────────────────┤    │
│  │ 🔐 私钥                     │    │
│  │ 导入私钥                     │    │
│  ├──────────────────────────────┤    │
│  │ 📄 Keystore JSON            │    │
│  │ 导入加密的 JSON 文件          │    │
│  └──────────────────────────────┘    │
│                                      │
│  连接硬件钱包                         │
│  ┌──────────────────────────────┐    │
│  │ [Ledger] [Trezor] [OneKey]  │    │
│  │ [Keystone] [imKey]          │    │
│  └──────────────────────────────┘    │
│                                      │
│  其他方式                             │
│  ┌──────────────────────────────┐    │
│  │ 🔗 WalletConnect            │    │
│  │ 📱 Coinbase Wallet          │    │
│  │ 🦊 从 MetaMask 迁移          │    │
│  │ 🔒 Gnosis Safe              │    │
│  │ 👁 观察钱包 (只读)            │    │
│  └──────────────────────────────┘    │
│                                      │
└──────────────────────────────────────┘
```

### 5.2 助记词导入流程

```
步骤 1: 输入助记词
┌──────────────────────────────────────┐
│  [←] 导入助记词          [12词 / 24词]│
├──────────────────────────────────────┤
│                                      │
│  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐  │
│  │  1   │ │  2   │ │  3   │ │  4   │  │
│  │ word │ │ word │ │ word │ │ word │  │
│  └─────┘ └─────┘ └─────┘ └─────┘  │
│  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐  │
│  │  5   │ │  6   │ │  7   │ │  8   │  │
│  │ word │ │ word │ │ word │ │ word │  │
│  └─────┘ └─────┘ └─────┘ └─────┘  │
│  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐  │
│  │  9   │ │ 10   │ │ 11   │ │ 12   │  │
│  │ word │ │ word │ │ word │ │ word │  │
│  └─────┘ └─────┘ └─────┘ └─────┘  │
│                                      │
│  或粘贴完整助记词: [          ]       │
│                                      │
│  HD 路径: [m/44'/60'/0'/0 ▼]        │
│                                      │
│  ┌──────────────────────────────┐    │
│  │       [确认]  (主按钮)        │    │
│  └──────────────────────────────┘    │
│                                      │
└──────────────────────────────────────┘

步骤 2: 选择地址
┌──────────────────────────────────────┐
│  [←] 选择地址                        │
├──────────────────────────────────────┤
│                                      │
│  检测到以下地址:                      │
│  ┌──────────────────────────────┐    │
│  │ [✅] 0x1234...5678 $12,345  │    │
│  │ [  ] 0xabcd...ef01 $0.00   │    │
│  │ [  ] 0x9876...5432 $0.00   │    │
│  │ [  ] 0xffff...0000 $0.00   │    │
│  │ [  ] 0x1111...2222 $0.00   │    │
│  └──────────────────────────────┘    │
│  [加载更多地址]                       │
│                                      │
│  ┌──────────────────────────────┐    │
│  │       [导入选中地址]           │    │
│  └──────────────────────────────┘    │
│                                      │
└──────────────────────────────────────┘

步骤 3: 设置密码 (首次)
┌──────────────────────────────────────┐
│  [←] 设置密码                        │
├──────────────────────────────────────┤
│                                      │
│  密码: [●●●●●●●●      ]             │
│  确认: [●●●●●●●●      ]             │
│                                      │
│  密码强度: [████░░░░░░] 中等          │
│                                      │
│  [✅] 我了解如果忘记密码将无法恢复     │
│                                      │
│  ┌──────────────────────────────┐    │
│  │       [完成]  (主按钮)        │    │
│  └──────────────────────────────┘    │
│                                      │
└──────────────────────────────────────┘
```

---

## 6. 实施优先级

### P0 - 核心基础 (第一阶段)

| 编号 | 模块 | 描述 | 涉及页面 |
|------|------|------|----------|
| P0-1 | 设计系统 | 建立 packages/ui，迁移色彩/排版/间距令牌 | - |
| P0-2 | 布局框架 | Web 端 AppLayout (TopBar + SideNav + Content) | - |
| P0-3 | 主题切换 | Light/Dark 模式，CSS 变量系统 | 全局 |
| P0-4 | 仪表盘 | 资产概览、Token列表、快捷操作 | `/dashboard` |
| P0-5 | 发送 | SendToken 完整流程 + Gas设置 | `/send-token` |
| P0-6 | 接收 | QR码 + 地址展示 | `/receive` |
| P0-7 | 账户管理 | 账户切换、地址管理 | `/address-management` |
| P0-8 | 认证 | 解锁、创建密码 | `/unlock`, `/create-password` |
| P0-9 | Admin登录 | 管理系统登录页 | `/admin/login` |
| P0-10 | Admin概览 | 管理仪表盘 | `/admin/dashboard` |

### P1 - 核心功能 (第二阶段)

| 编号 | 模块 | 描述 | 涉及页面 |
|------|------|------|----------|
| P1-1 | Swap | Token兑换 + 报价列表 + 确认流程 | `/swap` |
| P1-2 | Bridge | 跨链桥 + 路由选择 | `/bridge` |
| P1-3 | 导入流程 | 助记词/私钥/Keystore导入 | `/import/*` |
| P1-4 | 交易历史 | 完整历史列表 + 筛选 | `/history` |
| P1-5 | 设置 | 全部设置页面 | `/settings/*` |
| P1-6 | 审批流程 | WalletConnect交易审批 Modal | 全局 Modal |
| P1-7 | Admin链管理 | 链配置CRUD | `/admin/chains/*` |
| P1-8 | Admin用户 | 用户列表+详情 | `/admin/users/*` |

### P2 - 完整功能 (第三阶段)

| 编号 | 模块 | 描述 | 涉及页面 |
|------|------|------|----------|
| P2-1 | NFT | NFT画廊 + 发送 | `/nft-view`, `/send-nft` |
| P2-2 | 授权管理 | Token/NFT授权列表 + 撤销 | `/token-approval`, `/nft-approval` |
| P2-3 | DApp浏览器 | DApp搜索 + 收藏 | `/dapp-search` |
| P2-4 | 硬件钱包 | Ledger/Trezor等连接 | `/import/hardware/*` |
| P2-5 | Gas账户 | Gas余额管理 | `/gas-account` |
| P2-6 | Rabby积分 | 积分系统 | `/rabby-points` |
| P2-7 | Admin安全 | 安全规则+钓鱼库 | `/admin/security/*` |
| P2-8 | Admin DApp | DApp上架审核 | `/admin/dapps/*` |
| P2-9 | Admin审计 | 操作日志 | `/admin/audit/*` |
| P2-10 | Admin RBAC | 角色权限管理 | `/admin/system/*` |

### P3 - 高级功能 (第四阶段)

| 编号 | 模块 | 描述 |
|------|------|------|
| P3-1 | 高级交易 | 交易加速/取消 |
| P3-2 | Gnosis Safe | 多签钱包集成 |
| P3-3 | 已连接站点 | 站点权限管理 |
| P3-4 | 自定义测试网 | 测试网配置 |
| P3-5 | 数据导出 | 交易记录导出 |
| P3-6 | 通知系统 | 实时通知 (WebSocket) |
| P3-7 | 国际化 | i18n 多语言 |
| P3-8 | 无障碍 | WCAG 2.1 AA 合规 |

---

## 附录 A: 技术栈对照

| 维度 | 扩展插件 (src/) | Web 前端 (apps/web) | 管理系统 (apps/admin) |
|------|----------------|--------------------|--------------------|
| 框架 | React 18 | React 18 | React 18 |
| 路由 | react-router (Hash) | react-router v6 (History) | react-router v6 (History) |
| 状态管理 | Rematch (Redux) | Zustand / React Context | React Context |
| UI 库 | Ant Design 4 + 自定义 | Ant Design 5 + packages/ui | Ant Design 5 + ProComponents |
| 样式 | Tailwind + LESS | Tailwind + CSS Modules | CSS Modules |
| 构建 | Webpack | Vite | Vite |
| HTTP | Axios | Axios / fetch | Axios |
| 国际化 | react-i18next | react-i18next | react-i18next |
| 图表 | lightweight-charts | lightweight-charts + Recharts | Recharts / AntV |

## 附录 B: 扩展插件组件 → Web 组件映射

| 扩展插件组件 | Web 端替代方案 | 说明 |
|------------|---------------|------|
| `getUiType()` | 不需要 | Web端只有一种视图模式 |
| `chrome.storage` | localStorage + API | 持久化改为 API 存储 |
| `chrome.runtime.sendMessage` | API 调用 | 后端通信改为 REST API |
| `Popup 弹窗` | 全页面路由 | 不再受 360px 宽度限制 |
| `Notification 窗口` | Modal 弹窗 | 审批改为 Modal |
| `PortalHost` | React Portal | 保持 Portal 模式 |
| `StrayPage` | AuthLayout | 独立页面改为认证布局 |
| `PageHeader (返回按钮)` | Breadcrumb | 使用面包屑导航 |
| `DesktopNav (84px)` | SideNav (240px) | 扩展为完整侧边栏 |

## 附录 C: 安全规则可视化规范

从扩展插件 1:1 照搬的安全检查 UI:

```
风险等级可视化:
├── Level 0 (安全):   🟢 绿色边框 + ✅ 图标
├── Level 1 (信息):   🔵 蓝色边框 + ℹ️ 图标
├── Level 2 (警告):   🟡 橙色边框 + ⚠️ 图标
├── Level 3 (危险):   🔴 红色边框 + 🚫 图标
└── Level 4 (禁止):   ⬛ 黑色边框 + 🛑 图标 (阻止操作)

交易类型检测:
├── Token Transfer    → "发送 X TOKEN 到 0x..."
├── Token Approval    → "授权 X TOKEN 给 合约名称"
├── Swap             → "兑换 X TOKEN-A 为 Y TOKEN-B"
├── Bridge           → "跨链 X TOKEN (链A → 链B)"
├── Contract Call    → "调用 合约名称.方法名()"
├── Deploy Contract  → "部署新合约"
└── Unknown          → "未知操作 (显示原始数据)"
```
